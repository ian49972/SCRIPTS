local Object = game:GetObjects("rbxassetid://15088598907")[1]  
Object.Parent = game.Workspace
Object:PivotTo(game.Players.LocalPlayer.Character:GetPivot())

local Zombies = {}
local sight = 80
local caninfect = true
local canrandomwalk = true
local ragdolldeath = true
local step = game:GetService("RunService").Stepped

local function createZombie(model)
	local self = {}
	self.model = model
	self.torso = model.Torso
	self.head = model.Head
	self.leftarm = model["Left Arm"]
	self.rightarm = model["Right Arm"]
	self.leftleg = model["Left Leg"]
	self.rightleg = model["Right Leg"]
	self.humanoid = model:FindFirstChildOfClass("Humanoid")
	self.sine = 0
	self.walking = false
	self.attacking = false
	self.cansay = true
	self.candmg = true
	self.saycooldown = 0

	local ok = Instance.new("BoolValue", model)
	ok.Name = "Zombie AI"

	self.humanoid.MaxHealth = math.random(100,400)
	self.humanoid.Health = self.humanoid.MaxHealth

	self.footstep = Instance.new("Sound", self.head)
	self.footstep.Name = "footstep"
	self.footstep.SoundId = "rbxassetid://4113577407"
	self.footstep.Looped = true
	self.footstep.Volume = 0
	self.footstep:Play()

	self.neck = self.torso.Neck
	self.neck.C1 = CFrame.new(0,0,0)
	self.leftshoulder = self.torso["Left Shoulder"]
	self.leftshoulder.C1 = CFrame.new(0,0,0)
	self.rightshoulder = self.torso["Right Shoulder"]
	self.rightshoulder.C1 = CFrame.new(0,0,0)
	self.lefthip = self.torso["Left Hip"]
	self.lefthip.C1 = CFrame.new(0,0,0)
	self.righthip = self.torso["Right Hip"]
	self.righthip.C1 = CFrame.new(0,0,0)

	if model:FindFirstChild("HumanoidRootPart") then
		if model.HumanoidRootPart:FindFirstChild("RootJoint") then
			self.root = model.HumanoidRootPart.RootJoint
			self.root.C1 = CFrame.new(0,0,0)
		elseif model.HumanoidRootPart:FindFirstChild("Root Hip") then
			self.root = model.HumanoidRootPart["Root Hip"]
			self.root.C1 = CFrame.new(0,0,0)
		end
	else
		self.humanoid.Health = 0
	end

	function self:walkanim(walkspeed)
		if walkspeed > 2 then
			self.walking = true
		else
			self.walking = false
		end
	end
	self.humanoid.Running:Connect(function(speed) self:walkanim(speed) end)

	function self:walkrandomly()
		while wait(math.random(3,6)) do
			if not self.walking and canrandomwalk then
				self.humanoid.WalkSpeed = 10
				local function createwalkpart()
					local walkpart = Instance.new("Part", self.model)
					walkpart.Size = Vector3.new(1,1,1)
					walkpart.Anchored = true
					walkpart.Material = "Neon"
					walkpart.Transparency = 1
					walkpart.BrickColor = BrickColor.new("Maroon")
					walkpart.CFrame = self.torso.CFrame * CFrame.new(math.random(-60,60),math.random(-30,30),math.random(-60,60))
					local path = game:GetService("PathfindingService"):FindPathAsync(self.torso.Position, walkpart.Position)
					local waypoints = path:GetWaypoints()
					if path.Status == Enum.PathStatus.Success then
						for i,v in pairs(waypoints) do
							if canrandomwalk then
								self.humanoid:MoveTo(v.Position)
								local allow = 0
								while (self.torso.Position - v.Position).magnitude > 4 and allow < 25 do
									allow = allow + 1
									wait()
								end
								if v.Action == Enum.PathWaypointAction.Jump then
									self.humanoid.Jump = true
								end
							end
						end
						for i,v in pairs(self.model:GetChildren()) do
							if v.Name == "pospart" then
								v:Destroy()
							end
						end
					else
						createwalkpart()
						wait()
					end
				end
				createwalkpart()
			end
		end
	end

	function self:chase()
		while true do
			if not self.walking then
				for i,v in pairs(workspace:GetChildren()) do
					if not v:FindFirstChild("Zombie AI") and v:FindFirstChildOfClass("Humanoid") and v:FindFirstChild("Head") then
						if (v:FindFirstChild("Head").Position - self.head.Position).magnitude < sight then
							canrandomwalk = false
							local thehumanoid = v:FindFirstChildOfClass("Humanoid")
							local thehead = v:FindFirstChild("Head")
							while (thehead.Position - self.head.Position).magnitude < sight and thehumanoid.Health > 0 and not v:FindFirstChild("Zombie AI") do
								self.humanoid.WalkSpeed = 13
								self.humanoid:MoveTo(thehead.Position, thehead)
								local path = game:GetService("PathfindingService"):FindPathAsync(self.torso.Position, thehead.Position)
								local waypoints = path:GetWaypoints()
								if path.Status == Enum.PathStatus.Success then
									for q,w in pairs(waypoints) do
										if q ~= 1 then
											local allow = 0
											self.humanoid:MoveTo(w.Position, thehead)
											while (self.torso.Position - w.Position).magnitude > 3.8 and allow < 20 do
												allow = allow + 1
												game:GetService("RunService").Heartbeat:Wait()
											end
											if w.Action == Enum.PathWaypointAction.Jump then
												self.humanoid.Jump = true
											end
											if thehumanoid.Health <= 0 then
												break
											end
											if v:FindFirstChild("Zombie AI") then
												break
											end
										end
									end
									for q,w in pairs(self.model:GetChildren()) do
										if w.Name == "pospart" then
											w:Destroy()
										end
									end
								else
									self.humanoid:MoveTo(thehead.Position, thehead)
								end
								wait()
							end
							canrandomwalk = true
						else
							canrandomwalk = true
						end
					end
				end
			end
			wait()
		end
	end

	function self:damage(part)
		if part.Parent:FindFirstChildOfClass("Humanoid") and part.Name ~= "pospart" and not part.Parent:FindFirstChild("Zombie AI") and self.candmg then
			local victimhumanoid = part.Parent:FindFirstChildOfClass("Humanoid")
			victimhumanoid:TakeDamage(4)
			if victimhumanoid.Health <= 4 and victimhumanoid.Health > 0 then
				self:infect(part.Parent)
			end
		end
	end
	self.torso.Touched:Connect(function(part) self:damage(part) end)

	function self:infect(victim)
		local deathrandom = math.random(1,5)
		local deathsound = Instance.new("Sound", victim.Head)
		deathsound.Volume = 0.5
		if deathrandom == 1 then
			deathsound.SoundId = "rbxassetid://566988981"
		elseif deathrandom == 2 then
			deathsound.SoundId = "rbxassetid://884349060"
		elseif deathrandom == 3 then
			deathsound.SoundId = "rbxassetid://170399891"
		elseif deathrandom == 4 then
			deathsound.SoundId = "rbxassetid://402192395"
		elseif deathrandom == 5 then
			deathsound.SoundId = "rbxassetid://1835338424"
		end
		deathsound:Play()
		if victim == game.Players.LocalPlayer.Character then
			local ok = Instance.new("BoolValue", victim)
			ok.Name = "Zombie AI"
			for i,v in pairs(victim:GetChildren()) do
				if v.ClassName == "Script" and v.Name ~= "Health" then
					v:Destroy()
				end
			end
			local green = math.random(1,3)
			local color
			if green == 1 then
				color = BrickColor.new("Sea green")
			elseif green == 2 then
				color = BrickColor.new("Bright green")
			elseif green == 3 then
				color = BrickColor.new("Forest green")
			end
			for i,v in pairs(victim:GetChildren()) do
				if v:IsA("MeshPart") or v:IsA("Part") then
					v.BrickColor = color
				end
			end
			local torso = victim.Torso
			local head = victim.Head
			local leftarm = victim["Left Arm"]
			local rightarm = victim["Right Arm"]
			local leftleg = victim["Left Leg"]
			local rightleg = victim["Right Leg"]
			local humanoid = victim:FindFirstChildOfClass("Humanoid")
			local neck = torso.Neck
			neck.C1 = CFrame.new(0,0,0)
			local leftshoulder = torso["Left Shoulder"]
			leftshoulder.C1 = CFrame.new(0,0,0)
			local rightshoulder = torso["Right Shoulder"]
			rightshoulder.C1 = CFrame.new(0,0,0)
			local lefthip = torso["Left Hip"]
			lefthip.C1 = CFrame.new(0,0,0)
			local righthip = torso["Right Hip"]
			righthip.C1 = CFrame.new(0,0,0)
			local root
			if victim:FindFirstChild("HumanoidRootPart") then
				if victim.HumanoidRootPart:FindFirstChild("RootJoint") then
					root = victim.HumanoidRootPart.RootJoint
					root.C1 = CFrame.new(0,0,0)
				elseif victim.HumanoidRootPart:FindFirstChild("Root Hip") then
					root = victim.HumanoidRootPart["Root Hip"]
					root.C1 = CFrame.new(0,0,0)
				end
			end
			local animator = humanoid:FindFirstChild("Animator")
			if animator then animator:Destroy() end
			local walking = false
			humanoid.Running:Connect(function(speed)
				if speed > 2 then walking = true else walking = false end
			end)
			local sine = 0
			local footstep = Instance.new("Sound", head)
			footstep.Name = "footstep"
			footstep.SoundId = "rbxassetid://4113577407"
			footstep.Looped = true
			footstep.Volume = 0
			footstep:Play()
			spawn(function()
				while humanoid.Health > 0 do
					sine = sine + 1
					if not walking then
						footstep.Volume = 0
						neck.C0 = neck.C0:Lerp(CFrame.new(0,1.2,0) * CFrame.Angles(math.sin(sine/30)/10,0,0) * CFrame.new(0,0.25,0),0.1)
						righthip.C0 = righthip.C0:Lerp(CFrame.new(0.5,-1-math.cos(sine/30)/15,0) * CFrame.Angles(math.rad(10+(2*math.sin(-sine/30))),0,-math.sin(sine/60)/10) * CFrame.new(0,-1,0),0.1)
						lefthip.C0 = lefthip.C0:Lerp(CFrame.new(-0.5,-1-math.cos(sine/30)/15,0) * CFrame.Angles(math.rad(10+(2*math.sin(-sine/30))),0,-math.sin(sine/60)/10) * CFrame.new(0,-1,0),0.1)
						root.C0 = root.C0:Lerp(CFrame.new(0,math.cos(sine/30)/15,0) * CFrame.Angles(math.rad(-10+(2*math.sin(sine/30))),0,math.sin(sine/60)/15),0.1)
						rightshoulder.C0 = rightshoulder.C0:Lerp(CFrame.new(1.5,0.5,0) * CFrame.Angles(math.rad(20)+math.rad(5*math.sin(sine/30)),0,math.rad(5*math.cos(sine/30)/2)) * CFrame.new(0,-0.5,0),0.1)
						leftshoulder.C0 = leftshoulder.C0:Lerp(CFrame.new(-1.5,0.5,0) * CFrame.Angles(math.rad(20)-math.rad(5*math.sin(sine/30)),0,-math.rad(5*math.cos(sine/30)/2)) * CFrame.new(0,-0.5,0),0.1)
					else
						footstep.Volume = 0.5
						leftshoulder.C0 = leftshoulder.C0:Lerp(CFrame.new(-1.5,0.5,0) * CFrame.Angles(math.rad(100-math.cos(sine/5)*10),0,math.rad(math.sin(sine/10)*10)) * CFrame.new(0,-0.5,0),0.1)
						rightshoulder.C0 = rightshoulder.C0:Lerp(CFrame.new(1.5,0.5,0) * CFrame.Angles(math.rad(100-math.cos(sine/5)*10),0,math.rad(math.sin(sine/10)*10)) * CFrame.new(0,-0.5,0),0.1)
						neck.C0 = neck.C0:Lerp(CFrame.new(0,1.2,0) * CFrame.Angles(math.rad(10+math.cos(sine/5)*6),0,0) * CFrame.new(0,0.25,0),0.1)
						root.C0 = root.C0:Lerp(CFrame.new(0,math.sin(sine/5)/9,0) * CFrame.Angles(math.rad(-15),0,math.cos(sine/10)/6),0.1)
						righthip.C0 = righthip.C0:Lerp(CFrame.new(0.5,-1+math.cos(sine/10)/3,-math.cos(sine/10)/3) * CFrame.Angles(math.sin(sine/10),0,0) * CFrame.new(0,-1,0),0.1)
						lefthip.C0 = lefthip.C0:Lerp(CFrame.new(-0.5,-1-math.cos(sine/10)/3,math.cos(sine/10)/3) * CFrame.Angles(-math.sin(sine/10),0,0) * CFrame.new(0,-1,0),0.1)
					end
					game:GetService("RunService").Stepped:Wait()
				end
			end)
			local damaging_part = victim:FindFirstChild("Torso") or victim:FindFirstChild("UpperTorso")
			if damaging_part then
				damaging_part.Touched:Connect(function(hit)
					if hit.Parent:FindFirstChildOfClass("Humanoid") and hit.Name ~= "pospart" and not hit.Parent:FindFirstChild("Zombie AI") then
						local vh = hit.Parent:FindFirstChildOfClass("Humanoid")
						vh:TakeDamage(4)
						if vh.Health <= 4 and vh.Health > 0 then
							self:infect(hit.Parent)
						end
					end
				end)
			end
		else
			if not caninfect then
				victim:FindFirstChildOfClass("Humanoid").Health = 0
				return
			end
			if victim:FindFirstChild("UpperTorso") then
				victim:FindFirstChildOfClass("Humanoid").Health = 0
				return
			end
			if victim:FindFirstChild("Torso") and victim:FindFirstChild("HumanoidRootPart") then
				victim.Head.CFrame = CFrame.new(victim.Head.Position, self.head.Position)
				victim:FindFirstChildOfClass("Humanoid").WalkSpeed = 0
				victim:FindFirstChildOfClass("Humanoid").JumpPower = 0
				local ok = Instance.new("BoolValue", victim)
				ok.Name = "Zombie AI"
				local rightarmw, leftarmw, rightlegw, leftlegw, humanoidrootpartw
				if victim:FindFirstChild("Right Arm") then
					rightarmw = Instance.new("Weld", victim.Torso)
					rightarmw.Part0 = victim.Torso
					rightarmw.Part1 = victim["Right Arm"]
					rightarmw.C0 = CFrame.new(1.5,0,0)
					rightarmw.Name = "RightArmWeld"
				end
				if victim:FindFirstChild("Right Leg") then
					rightlegw = Instance.new("Weld", victim.Torso)
					rightlegw.Part0 = victim.Torso
					rightlegw.Part1 = victim["Right Leg"]
					rightlegw.C0 = CFrame.new(0.5,-2,0)
					rightlegw.Name = "RightLegWeld"
				end
				if victim:FindFirstChild("Left Arm") then
					leftarmw = Instance.new("Weld", victim.Torso)
					leftarmw.Part0 = victim.Torso
					leftarmw.Part1 = victim["Left Arm"]
					leftarmw.C0 = CFrame.new(-1.5,0,0)
					leftarmw.Name = "LeftArmWeld"
				end
				if victim:FindFirstChild("Left Leg") then
					leftlegw = Instance.new("Weld", victim.Torso)
					leftlegw.Part0 = victim.Torso
					leftlegw.Part1 = victim["Left Leg"]
					leftlegw.C0 = CFrame.new(-0.5,-2,0)
					leftlegw.Name = "LeftLegWeld"
				end
				humanoidrootpartw = Instance.new("Weld", victim.HumanoidRootPart)
				humanoidrootpartw.Part0 = victim.HumanoidRootPart
				humanoidrootpartw.Part1 = victim.Torso
				humanoidrootpartw.Name = "HumanoidRootPartWeld"
				for i,v in pairs(victim:GetChildren()) do
					if v.ClassName == "Script" and v.Name ~= "Zombie AI" and v.Name ~= "Health" then
						v:Destroy()
					end
				end
				for i = 0,1 , 0.02 do
					if rightarmw then rightarmw.C0 = rightarmw.C0:Lerp(CFrame.new(1.64086914, 0.201171875, 0, 0.939692497, -0.342020094, 0, 0.342020124, 0.939692557, 0, 0, 0, 1),i) end
					if leftarmw then leftarmw.C0 = leftarmw.C0:Lerp(CFrame.new(-1.98254395, 0.588928223, 0, 0.342020214, 0.939692438, -1.77635663e-15, -0.939692497, 0.342020243, -3.55271368e-15, 0, 3.55271368e-15, 1),i) end
					if leftlegw then leftlegw.C0 = leftlegw.C0:Lerp(CFrame.new(-0.681274414, -2.07165527, 0, 0.984807611, 0.173648268, 0, -0.173648283, 0.98480767, 0, 0, 0, 1),i) end
					if rightlegw then rightlegw.C0 = rightlegw.C0:Lerp(CFrame.new(1.0670166, -2.11602783, 0, 0.866025329, -0.499999851, 0, 0.499999881, 0.866025388, 0, 0, 0, 1),i) end
					if humanoidrootpartw then humanoidrootpartw.C0 = humanoidrootpartw.C0:Lerp(CFrame.new(0, -2.60009766, 1.20001221, 0.99999994, 0, 0, 0, -4.37113883e-08, -1, 0, 1, -4.37113883e-08),i) end
					game:GetService("RunService").Heartbeat:Wait()
				end
				wait(1)
				for i,v in pairs(victim.Torso:GetChildren()) do
					if v.ClassName == "Weld" then
						v:Destroy()
					end
				end
				for i,v in pairs(victim.HumanoidRootPart:GetChildren()) do
					if v.ClassName == "Weld" then
						v:Destroy()
					end
				end
			else
				victim:FindFirstChildOfClass("Humanoid").PlatformStand = true
				for i,v in pairs(victim:GetChildren()) do
					if v.ClassName == "Script" and v.Name ~= "Zombie AI" and v.Name ~= "Health" then
						v:Destroy()
					end
				end
				wait(1)
				victim.Archivable = true
				if victim:FindFirstChild("Torso") then
					for i,v in pairs(victim.Torso:GetChildren()) do
						if v.ClassName == "Weld" then
							v:Destroy()
						end
					end
				end
			end
			victim.Archivable = true
			local clone = victim:Clone()
			victim:Destroy()
			clone.Name = clone.Name.." (Zombie)"
			clone.Parent = workspace
			for i,v in pairs(clone:GetChildren()) do
				if v.ClassName == "Script" and v.Name ~= "Health" then
					v.Disabled = true
				end
			end
			wait(0.2)
			local green = math.random(1,3)
			local color
			if green == 1 then
				color = BrickColor.new("Sea green")
			elseif green == 2 then
				color = BrickColor.new("Bright green")
			elseif green == 3 then
				color = BrickColor.new("Forest green")
			end
			for i,v in pairs(clone:GetChildren()) do
				if v:IsA("MeshPart") or v:IsA("Part") then
					v.BrickColor = color
				end
			end
			createZombie(clone)
		end
	end

	function self:death()
		self.candmg = false
		if self.model:FindFirstChild("Health") then
			self.model.Health:Destroy()
		end
		if self.head:FindFirstChild("footstep") then
			self.head.footstep:Destroy()
		end
		self.humanoid.Archivable = true
		local zombiecorpse = self.model:Clone()
		zombiecorpse:FindFirstChildOfClass("Humanoid").Health = 0
		zombiecorpse:BreakJoints()
		self.model:Destroy()
		zombiecorpse.Parent = workspace
		game.Debris:AddItem(zombiecorpse, 20)
		local Humanoid = zombiecorpse:FindFirstChildOfClass("Humanoid")
		local Torso = zombiecorpse.Torso
		Humanoid.PlatformStand = true
		for i,v in pairs(Humanoid.Parent.Torso:GetChildren()) do
			if v:IsA('Motor6D') or v:IsA('Weld') then
				v:Destroy()
			end
		end
		for i,v in pairs(zombiecorpse:GetChildren()) do
			if v:IsA("Part") then
				for q,w in pairs(v:GetChildren()) do
					if w:IsA("BodyPosition") or w:IsA("BodyVelocity") then
						w:Destroy()
					end
				end
			end
		end
		if zombiecorpse:FindFirstChild("Head") then
			local deathrandom = math.random(1,7)
			local deathsound = Instance.new("Sound", zombiecorpse.Head)
			deathsound.Volume = 3
			if deathrandom == 1 then
				deathsound.SoundId = "rbxassetid://131138845"
			elseif deathrandom == 2 then
				deathsound.SoundId = "rbxassetid://131138839"
			elseif deathrandom == 3 then
				deathsound.SoundId = "rbxassetid://131138850"
			elseif deathrandom == 4 then
				deathsound.SoundId = "rbxassetid://131138860"
			elseif deathrandom == 5 then
				deathsound.SoundId = "rbxassetid://131138854"
			elseif deathrandom == 6 then
				deathsound.SoundId = "rbxassetid://131138848"
			elseif deathrandom == 7 then
				deathsound.SoundId = "rbxassetid://461063380"
			end
			deathsound:Play()
		end
		local function makeconnections(limb, attachementone, attachmenttwo, twistlower, twistupper, upperangle)
			local connection = Instance.new('BallSocketConstraint', limb)
			connection.LimitsEnabled = true
			connection.Attachment0 = attachementone
			connection.Attachment1 = attachmenttwo
			connection.TwistLimitsEnabled = true
			connection.TwistLowerAngle = twistlower
			connection.TwistUpperAngle = twistupper
			connection.UpperAngle = 70
		end
		local function makehingeconnections(limb, attachementone, attachmenttwo, twistlower, twistupper, upperangle)
			local connection = Instance.new('HingeConstraint', limb)
			connection.Attachment0 = attachementone
			connection.Attachment1 = attachmenttwo
			connection.LimitsEnabled = true
			connection.LowerAngle = twistlower
			connection.UpperAngle = twistupper
		end
		Humanoid.Parent['Right Arm'].RightShoulderAttachment.Position = Vector3.new(0, 0.5, 0)
		Torso.RightCollarAttachment.Position = Vector3.new(1.5, 0.5, 0)
		Humanoid.Parent['Left Arm'].LeftShoulderAttachment.Position = Vector3.new(0, 0.5, 0)
		Torso.LeftCollarAttachment.Position = Vector3.new(-1.5, 0.5, 0)
		local RightLegAttachment = Instance.new("Attachment", Humanoid.Parent["Right Leg"])
		RightLegAttachment.Position = Vector3.new(0, 1, 0)
		local TorsoRightLegAttachment = Instance.new("Attachment", Torso)
		TorsoRightLegAttachment.Position = Vector3.new(0.5, -1, 0)
		local LeftLegAttachment = Instance.new("Attachment", Humanoid.Parent["Left Leg"])
		LeftLegAttachment.Position = Vector3.new(0, 1, 0)
		local TorsoLeftLegAttachment = Instance.new("Attachment", Torso)
		TorsoLeftLegAttachment.Position = Vector3.new(-0.5, -1, 0)
		if Humanoid.Parent:FindFirstChild("Head") then
			local HeadAttachment = Instance.new("Attachment", Humanoid.Parent.Head)
			HeadAttachment.Position = Vector3.new(0, -0.5, 0)
			makehingeconnections(Humanoid.Parent.Head, HeadAttachment, Torso.NeckAttachment, -20, 20, 70)
		end
		makeconnections(Humanoid.Parent['Right Arm'], Humanoid.Parent['Right Arm'].RightShoulderAttachment, Torso.RightCollarAttachment, -80, 80)
		makeconnections(Humanoid.Parent['Left Arm'], Humanoid.Parent['Left Arm'].LeftShoulderAttachment, Torso.LeftCollarAttachment, -80, 80)
		makeconnections(Humanoid.Parent['Right Leg'], RightLegAttachment, TorsoRightLegAttachment, -80, 80, 70)
		makeconnections(Humanoid.Parent['Left Leg'], LeftLegAttachment, TorsoLeftLegAttachment, -80, 80, 70)
		if Humanoid.Parent:FindFirstChild("Right Arm") then
			local limbcollider = Instance.new("Part", Humanoid.Parent["Right Arm"])
			limbcollider.Size = Vector3.new(1,1.3,1)
			limbcollider.Shape = "Cylinder"
			limbcollider.Transparency = 1
			local limbcolliderweld = Instance.new("Weld", limbcollider)
			limbcolliderweld.Part0 = Humanoid.Parent["Right Arm"]
			limbcolliderweld.Part1 = limbcollider
			limbcolliderweld.C0 = CFrame.fromEulerAnglesXYZ(0,0,math.pi/2) * CFrame.new(-0.4,0,0)
			for i,v in pairs(zombiecorpse["Right Arm"]:GetChildren()) do
				if v:IsA('Motor6D') or v:IsA('Weld') then
					v:Destroy()
				end
			end
		end
		if Humanoid.Parent:FindFirstChild("Left Arm") then
			local limbcollider = Instance.new("Part", Humanoid.Parent["Left Arm"])
			limbcollider.Size = Vector3.new(1,1.3,1)
			limbcollider.Shape = "Cylinder"
			limbcollider.Transparency = 1
			local limbcolliderweld = Instance.new("Weld", limbcollider)
			limbcolliderweld.Part0 = Humanoid.Parent["Left Arm"]
			limbcolliderweld.Part1 = limbcollider
			limbcolliderweld.C0 = CFrame.fromEulerAnglesXYZ(0,0,math.pi/2) * CFrame.new(-0.4,0,0)
		end
		if Humanoid.Parent:FindFirstChild("Left Leg") then
			local limbcollider = Instance.new("Part", Humanoid.Parent["Left Leg"])
			limbcollider.Size = Vector3.new(1,1.3,1)
			limbcollider.Shape = "Cylinder"
			limbcollider.Transparency = 1
			local limbcolliderweld = Instance.new("Weld", limbcollider)
			limbcolliderweld.Part0 = Humanoid.Parent["Left Leg"]
			limbcolliderweld.Part1 = limbcollider
			limbcolliderweld.C0 = CFrame.fromEulerAnglesXYZ(0,0,math.pi/2) * CFrame.new(-0.4,0,0)
		end
		if Humanoid.Parent:FindFirstChild("Right Leg") then
			local limbcollider = Instance.new("Part", Humanoid.Parent["Right Leg"])
			limbcollider.Size = Vector3.new(1,1.3,1)
			limbcollider.Shape = "Cylinder"
			limbcollider.Transparency = 1
			local limbcolliderweld = Instance.new("Weld", limbcollider)
			limbcolliderweld.Part0 = Humanoid.Parent["Right Leg"]
			limbcolliderweld.Part1 = limbcollider
			limbcolliderweld.C0 = CFrame.fromEulerAnglesXYZ(0,0,math.pi/2) * CFrame.new(-0.4,0,0)
		end
		Humanoid.Health = 0
		local ragdoll = zombiecorpse
		if ragdoll:FindFirstChild("HumanoidRootPart") then
			ragdoll.HumanoidRootPart.CanCollide = false
			ragdoll.HumanoidRootPart:Destroy()
		end
		wait(0.5)
		for i,v in pairs(ragdoll:GetChildren()) do
			if v:IsA('Script') then
				v.Disabled = true
			end
		end
	end
	self.humanoid.Died:Connect(function() self:death() end)

	function self:animate()
		self.sine = self.sine + 1
		if not self.walking then
			self.footstep.Volume = 0
			self.neck.C0 = self.neck.C0:Lerp(CFrame.new(0,1.2,0) * CFrame.Angles(math.sin(self.sine/30)/10,0,0) * CFrame.new(0,0.25,0),0.1)
			self.righthip.C0 = self.righthip.C0:Lerp(CFrame.new(0.5,-1-math.cos(self.sine/30)/15,0) * CFrame.Angles(math.rad(10+(2*math.sin(-self.sine/30))),0,-math.sin(self.sine/60)/10) * CFrame.new(0,-1,0),0.1)
			self.lefthip.C0 = self.lefthip.C0:Lerp(CFrame.new(-0.5,-1-math.cos(self.sine/30)/15,0) * CFrame.Angles(math.rad(10+(2*math.sin(-self.sine/30))),0,-math.sin(self.sine/60)/10) * CFrame.new(0,-1,0),0.1)
			self.root.C0 = self.root.C0:Lerp(CFrame.new(0,math.cos(self.sine/30)/15,0) * CFrame.Angles(math.rad(-10+(2*math.sin(self.sine/30))),0,math.sin(self.sine/60)/15),0.1)
			self.rightshoulder.C0 = self.rightshoulder.C0:Lerp(CFrame.new(1.5,0.5,0) * CFrame.Angles(math.rad(20)+math.rad(5*math.sin(self.sine/30)),0,math.rad(5*math.cos(self.sine/30)/2)) * CFrame.new(0,-0.5,0),0.1)
			self.leftshoulder.C0 = self.leftshoulder.C0:Lerp(CFrame.new(-1.5,0.5,0) * CFrame.Angles(math.rad(20)-math.rad(5*math.sin(self.sine/30)),0,-math.rad(5*math.cos(self.sine/30)/2)) * CFrame.new(0,-0.5,0),0.1)
		else
			self.footstep.Volume = 0.5
			self.leftshoulder.C0 = self.leftshoulder.C0:Lerp(CFrame.new(-1.5,0.5,0) * CFrame.Angles(math.rad(100-math.cos(self.sine/5)*10),0,math.rad(math.sin(self.sine/10)*10)) * CFrame.new(0,-0.5,0),0.1)
			self.rightshoulder.C0 = self.rightshoulder.C0:Lerp(CFrame.new(1.5,0.5,0) * CFrame.Angles(math.rad(100-math.cos(self.sine/5)*10),0,math.rad(math.sin(self.sine/10)*10)) * CFrame.new(0,-0.5,0),0.1)
			self.neck.C0 = self.neck.C0:Lerp(CFrame.new(0,1.2,0) * CFrame.Angles(math.rad(10+math.cos(self.sine/5)*6),0,0) * CFrame.new(0,0.25,0),0.1)
			self.root.C0 = self.root.C0:Lerp(CFrame.new(0,math.sin(self.sine/5)/9,0) * CFrame.Angles(math.rad(-15),0,math.cos(self.sine/10)/6),0.1)
			self.righthip.C0 = self.righthip.C0:Lerp(CFrame.new(0.5,-1+math.cos(self.sine/10)/3,-math.cos(self.sine/10)/3) * CFrame.Angles(math.sin(self.sine/10),0,0) * CFrame.new(0,-1,0),0.1)
			self.lefthip.C0 = self.lefthip.C0:Lerp(CFrame.new(-0.5,-1-math.cos(self.sine/10)/3,math.cos(self.sine/10)/3) * CFrame.Angles(-math.sin(self.sine/10),0,0) * CFrame.new(0,-1,0),0.1)
		end
	end

	spawn(function() self:walkrandomly() end)
	spawn(function() self:chase() end)

	table.insert(Zombies, self)
	return self
end

createZombie(Object)

while step:Wait() do
	for _, z in ipairs(Zombies) do
		z:animate()
	end
end